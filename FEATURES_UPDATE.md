# 寶寶年齡追蹤器 - 新功能說明

## 🎉 新增功能

### 1. 寶寶記錄新增欄位

在編輯寶寶資料時，新增了以下欄位：

- **出生週數**：記錄寶寶在懷孕時的週數（20-45週）
- **出生天數**：記錄寶寶出生是該週的第幾天（週日到週六）

這些欄位有助於計算早產兒的矯正年齡。

### 2. 寶寶詳細資料頁面

點擊側邊欄中的寶寶名稱時，會導航到寶寶的詳細資料頁面，包含：

#### 基本資料區域：

- 寶寶姓名
- 出生日期
- 出生週數（如有記錄）
- 出生天數（如有記錄）
- **目前年齡**：從出生日期計算的實際年齡
- **矯正年齡**：針對早產兒，從預產期（40週）開始計算的年齡
- 備註資訊
- 編輯資料和新增統計按鈕

#### 成長統計表格：

- 以表格形式顯示所有身高、體重、頭圍記錄
- 記錄時間排序（最新的在上面）
- 每筆記錄都可以刪除
- 支援分頁顯示

### 3. 矯正年齡計算

針對早產兒（出生週數小於40週），系統會自動計算矯正年齡：

- **一般年齡**：從出生日期開始計算
- **矯正年齡**：從預產期（40週）開始計算
- 如果寶寶還沒到預產期，會顯示「尚未到預產期」

## 📊 使用流程

### 新增寶寶記錄：

1. 點擊側邊欄「新增寶寶」
2. 填寫基本資料：姓名、出生日期
3. **選填**：出生週數和出生天數（對早產兒特別重要）
4. 填寫備註（可選）
5. 點擊「新增」保存

### 查看寶寶詳細資料：

1. 在側邊欄點擊寶寶名稱
2. 查看完整的基本資料和年齡計算
3. 查看所有成長統計記錄表格

### 新增成長統計：

1. 在寶寶詳細頁面點擊「新增統計記錄」
2. 填寫身高、體重、頭圍（至少填一項）
3. 點擊「新增」保存

## 🗄️ 資料庫更新

如果您已經有現有的寶寶記錄，需要在 Supabase SQL Editor 中執行以下 SQL 來新增新欄位：

```sql
-- 執行 database_migration.sql 中的指令
ALTER TABLE baby_records
ADD COLUMN birth_week INTEGER,
ADD COLUMN birth_day INTEGER;

-- 新增檢查約束
ALTER TABLE baby_records
ADD CONSTRAINT check_birth_week
CHECK (birth_week IS NULL OR (birth_week >= 20 AND birth_week <= 45));

ALTER TABLE baby_records
ADD CONSTRAINT check_birth_day
CHECK (birth_day IS NULL OR (birth_day >= 0 AND birth_day <= 6));
```

## 🔧 設定步驟

1. **更新資料庫**：在 Supabase SQL Editor 中執行 `database_migration.sql` 的內容
2. **重新部署**：如果使用 GitHub Pages，推送變更會自動觸發部署
3. **測試功能**：登入後測試新增/編輯寶寶和查看詳細頁面

## 📱 新的頁面導航

- **首頁** (`/`)：登入頁面和寶寶列表
- **寶寶詳細頁面** (`/baby/:id`)：顯示特定寶寶的完整資料和統計表格

## 🎯 特色功能

1. **矯正年齡計算**：自動為早產兒計算矯正年齡
2. **響應式設計**：在手機和桌面都能良好顯示
3. **表格分頁**：大量統計記錄會自動分頁
4. **確認刪除**：刪除記錄前會要求確認
5. **即時更新**：新增/刪除記錄後立即更新顯示

所有功能都已整合完成，可以開始使用了！🎉
